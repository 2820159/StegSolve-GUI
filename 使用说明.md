# StegSolve GUI 使用说明

## 目录
- [简介](#简介)
- [安装](#安装)
- [启动程序](#启动程序)
- [界面介绍](#界面介绍)
- [功能详解](#功能详解)
- [使用示例](#使用示例)
- [常见问题](#常见问题)

---

## 简介

StegSolve GUI 是一个用于图像隐写术分析的图形化工具。它可以帮助您检测和分析图像文件中可能隐藏的秘密数据，广泛应用于 CTF 竞赛、数字取证和安全研究。

### 主要特性
- 位平面分析（0-7位）
- RGB 通道分离
- 基础图像操作
- 文件结构分析
- 字符串提取
- GIF 帧浏览
- 统计分析

---

## 安装

### 系统要求
- Python 3.6 或更高版本
- Windows / macOS / Linux

### 安装依赖

**方法一：使用 requirements.txt**
```bash
pip install -r requirements.txt
```

**方法二：手动安装**
```bash
pip install Pillow numpy
```

---

## 启动程序

### Windows
双击 `run_stegsolve.bat` 文件，或在命令行中运行：
```bash
python stegsolve_gui.py
```

### macOS / Linux
```bash
python3 stegsolve_gui.py
```

---

## 界面介绍

程序启动后，界面分为以下几个部分：

### 左侧面板 - 图像显示区
- **画布**：显示当前加载的图像
- **信息标签**：显示文件名、尺寸、颜色模式

### 右侧面板 - 控制区
包含四个选项卡：
1. **Basic（基础操作）**
2. **Bit Planes（位平面分析）**
3. **RGB Channels（RGB 通道）**
4. **Advanced（高级操作）**

### 底部状态栏
显示当前操作状态和提示信息

### 菜单栏
- **File（文件）**：打开、保存、退出
- **Tools（工具）**：提取字符串、分析文件结构
- **Help（帮助）**：关于信息

---

## 功能详解

### 1. 基础操作（Basic）

#### 打开图像
- 点击 "Open Image" 按钮
- 或使用快捷键 `Ctrl+O`
- 支持格式：PNG、JPEG、BMP、GIF、TIFF

#### 保存图像
- 点击 "Save Image" 按钮
- 或使用快捷键 `Ctrl+S`
- 选择保存格式和位置

#### 灰度转换
- 点击 "Grayscale" 按钮
- 将彩色图像转换为灰度图像

#### 颜色反转
- 点击 "Invert Colors" 按钮
- 反转图像的所有颜色值

#### 旋转图像
- 点击 "Rotate 90°" 按钮
- 将图像顺时针旋转 90 度

#### 翻转图像
- **Flip Horizontal**：水平翻转
- **Flip Vertical**：垂直翻转

#### 提取 LSB
- 点击 "Extract LSB" 按钮
- 显示最低有效位（位平面 0）

---

### 2. 位平面分析（Bit Planes）

#### 查看单个位平面
1. 在 "Select Bit Plane" 下拉框中选择 0-7
   - 0 = 最低有效位（LSB）
   - 7 = 最高有效位（MSB）
2. 选择通道：All、Red、Green、Blue、Alpha
3. 点击 "Show Bit Plane" 按钮

#### 位平面运算
- **XOR Planes**：对所有位平面进行异或运算
- **AND Planes**：对所有位平面进行与运算
- **OR Planes**：对所有位平面进行或运算
- **Extract All Planes**：在 2x4 网格中显示所有 8 个位平面

**提示**：隐写术通常使用 LSB（位平面 0）隐藏数据，查看位平面 0 可以发现异常模式。

---

### 3. RGB 通道分析（RGB Channels）

#### 分离颜色通道
- **Show Red Channel**：仅显示红色通道
- **Show Green Channel**：仅显示绿色通道
- **Show Blue Channel**：仅显示蓝色通道
- **Show Alpha Channel**：仅显示透明度通道（如果有）
- **Show RGB Composite**：显示完整的 RGB 合成图像

#### 颜色空间转换
- **Convert to HSV**：转换为 HSV 颜色空间
- **Convert to YCbCr**：转换为 YCbCr 颜色空间
- **Convert to LAB**：转换为 LAB 颜色空间（灰度近似）

---

### 4. 高级操作（Advanced）

#### 分析文件结构
1. 点击 "Analyze File Structure" 按钮
2. 查看文件信息：
   - 文件名和大小
   - 文件类型（PNG、JPEG、BMP、GIF）
   - 文件签名

#### 提取字符串
1. 点击 "Extract Strings" 按钮
2. 在弹出窗口中查看提取的可打印字符串
3. 最小字符串长度：4 个字符
4. 显示前 100 个字符串

**提示**：隐藏的文本或 flag 可能会以字符串形式出现在图像文件中。

#### GIF 帧浏览器
1. 加载一个 GIF 动画文件
2. 点击 "Frame Browser (GIF)" 按钮
3. 使用滑块浏览每一帧
4. 查看帧计数器

#### 统计分析
1. 点击 "Statistical Analysis" 按钮
2. 查看统计信息：
   - 最小值（Min）
   - 最大值（Max）
   - 平均值（Mean）
   - 标准差（Std）
   - 每个颜色通道的独立统计

#### 其他功能（待实现）
- **Compare Images**：图像对比
- **Data Carving**：数据提取
- **Noise Analysis**：噪声分析
- **LSB Replacement Detection**：LSB 替换检测

---

## 使用示例

### 示例 1：检测 LSB 隐写

**场景**：怀疑图像中通过 LSB 隐藏了信息

**步骤**：
1. 打开图像（Ctrl+O）
2. 切换到 "Bit Planes" 选项卡
3. 选择位平面 0（LSB）
4. 点击 "Show Bit Plane"
5. 观察位平面图像，寻找异常模式
6. 如果发现可疑图案，尝试 "Extract Strings" 提取文本

### 示例 2：分析 RGB 通道

**场景**：检查某个颜色通道中是否隐藏信息

**步骤**：
1. 打开图像
2. 切换到 "RGB Channels" 选项卡
3. 依次点击 "Show Red Channel"、"Show Green Channel"、"Show Blue Channel"
4. 仔细观察每个通道，寻找异常
5. 使用 "Extract Strings" 提取可能的隐藏文本

### 示例 3：分析 GIF 动画

**场景**：GIF 动画的某一帧可能包含隐藏信息

**步骤**：
1. 打开 GIF 文件
2. 点击 "Frame Browser (GIF)"
3. 使用滑块逐帧浏览
4. 对可疑帧进行位平面分析

### 示例 4：文件结构分析

**场景**：检查文件是否被篡改或包含隐藏数据

**步骤**：
1. 打开图像
2. 点击 "Analyze File Structure"
3. 查看文件签名是否正常
4. 检查文件大小是否异常
5. 使用 "Extract Strings" 查找隐藏文本

---

## 常见问题

### Q1: 程序无法启动？
**A**: 确保已安装 Python 3.6+ 和所有依赖：
```bash
pip install Pillow numpy
```

### Q2: 图像加载失败？
**A**: 检查文件格式是否受支持（PNG、JPEG、BMP、GIF、TIFF），确保文件未损坏。

### Q3: 位平面显示全黑或全白？
**A**: 这是正常的。高位平面（如位平面 7）通常包含主要图像信息，而低位平面（如位平面 0）可能看起来像噪声。隐写数据通常隐藏在低位平面中。

### Q4: 如何保存分析结果？
**A**: 使用 "Save Image" 功能（Ctrl+S）保存当前显示的图像。

### Q5: 提取的字符串太多怎么办？
**A**: 程序只显示前 100 个字符串。您可以：
- 搜索特定的关键词（如 "flag"、"CTF"）
- 使用其他工具（如 strings 命令）进行更深入分析

### Q6: 支持哪些图像格式？
**A**: PNG、JPEG、BMP、GIF、TIFF

### Q7: 如何判断图像是否包含隐写数据？
**A**: 没有绝对的方法，但可以：
- 查看低位平面（LSB）是否有异常模式
- 检查 RGB 通道是否有异常
- 提取字符串查找可疑文本
- 进行统计分析查看异常值

### Q8: 程序运行缓慢？
**A**: 大尺寸图像可能导致性能问题。建议：
- 使用较小的图像进行测试
- 关闭其他占用资源的程序

---

## 技术说明

### 位平面分析原理
每个像素的颜色值由 8 个二进制位组成（0-255）。位平面分析将每个位分离出来单独显示：
- 位平面 0（LSB）：最低有效位，常用于隐写
- 位平面 7（MSB）：最高有效位，包含主要图像信息

### RGB 通道分析
彩色图像由红（R）、绿（G）、蓝（B）三个通道组成。分离每个通道可以独立分析每个颜色分量。

### 字符串提取
扫描图像文件的二进制数据，提取连续的可打印 ASCII 字符（长度 ≥ 4），用于发现隐藏的文本信息。

---

## 快捷键

| 快捷键 | 功能 |
|--------|------|
| Ctrl+O | 打开图像 |
| Ctrl+S | 保存图像 |

---

## 许可证

本工具仅供教育和安全分析使用。请勿用于非法用途。

---

## 联系与反馈

如有问题或建议，欢迎反馈。

---

**祝您使用愉快！**
